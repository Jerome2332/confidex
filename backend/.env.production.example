# Production Environment Configuration
# Copy to .env.production and fill in your values
#
# SECURITY NOTICE:
# - Never commit this file with real values
# - Use a secrets manager in production (Vault, AWS Secrets Manager, etc.)
# - Generate secure API keys with: openssl rand -hex 32

# =============================================================================
# Server Configuration
# =============================================================================
PORT=3001
NODE_ENV=production

# =============================================================================
# Security & Authentication
# =============================================================================

# Admin API Key (REQUIRED in production)
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=

# =============================================================================
# RPC Configuration
# =============================================================================

# Primary RPC (Helius recommended for production - better rate limits)
CRANK_RPC_PRIMARY=https://devnet.helius-rpc.com/?api-key=YOUR_HELIUS_KEY

# Secondary/Tertiary RPC endpoints (for failover)
CRANK_RPC_SECONDARY=https://api.devnet.solana.com
CRANK_RPC_TERTIARY=

# Legacy fallback
RPC_URL=https://api.devnet.solana.com

# =============================================================================
# Crank Service Configuration
# =============================================================================
CRANK_ENABLED=true
CRANK_POLLING_INTERVAL_MS=5000
CRANK_USE_ASYNC_MPC=true
CRANK_MAX_CONCURRENT_MATCHES=5
CRANK_MIN_SOL_BALANCE=0.1

# Crank wallet - use ONE of the following:
# Option 1: File path (for local development)
CRANK_WALLET_PATH=./keys/crank-wallet.json

# Option 2: Secret key directly (RECOMMENDED for production/Docker)
# Accepts JSON array format [1,2,3,...] or base58 string
# Generate with: solana-keygen new -o wallet.json
# Then copy contents of wallet.json here
# CRANK_WALLET_SECRET_KEY=[your,secret,key,bytes,here]

# Database persistence
CRANK_DB_PATH=./data/crank.db

# Graceful shutdown timeout
CRANK_SHUTDOWN_TIMEOUT_MS=30000

# =============================================================================
# Circuit Breaker
# =============================================================================
CRANK_ERROR_THRESHOLD=10
CRANK_PAUSE_DURATION_MS=60000

# =============================================================================
# Alerting (Optional)
# =============================================================================
SLACK_WEBHOOK_URL=
ALERT_WEBHOOK_URL=

# =============================================================================
# MPC Settings (Arcium v0.6.3)
# =============================================================================
# NOTE: useRealMpc now defaults to TRUE. Set to 'false' only for testing.
CRANK_USE_REAL_MPC=true
FULL_MXE_PROGRAM_ID=DoT4uChyp5TCtkDw4VkUSsmj3u3SFqYQzr2KafrCqYCM
ARCIUM_CLUSTER_OFFSET=456
MPC_TIMEOUT_MS=120000

# =============================================================================
# ZK Prover Configuration
# =============================================================================
# Path to sunspot binary (default: ~/sunspot/go/sunspot)
SUNSPOT_BINARY_PATH=/Users/YOUR_USER/sunspot/go/sunspot

# Path to eligibility circuit directory (default: PROJECT_ROOT/circuits/eligibility)
# CIRCUIT_DIR=/path/to/circuits/eligibility

# Enable strict mode - rejects simulated proofs, requires real ZK infrastructure
# Set to 'true' in production
STRICT_PROOFS=true

# Proof cache settings
PROOF_CACHE_MAX_SIZE=100
PROOF_CACHE_TTL_MS=1800000

# =============================================================================
# Program IDs (Devnet)
# =============================================================================
CONFIDEX_PROGRAM_ID=63bxUBrBd1W5drU5UMYWwAfkMX7Qr17AZiTrm3aqfArB
MXE_PROGRAM_ID=DoT4uChyp5TCtkDw4VkUSsmj3u3SFqYQzr2KafrCqYCM

# =============================================================================
# Token Mints (Devnet)
# =============================================================================
WSOL_MINT=So11111111111111111111111111111111111111112
USDC_MINT=Gh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuSzaG9Vp2KGtKJr

# =============================================================================
# CORS Configuration
# =============================================================================
# Frontend URL (for CORS whitelist in production)
FRONTEND_URL=https://app.confidex.exchange
