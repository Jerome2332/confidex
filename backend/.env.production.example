# Production Environment Configuration
# Copy to .env.production and fill in your values
#
# SECURITY NOTICE:
# - Never commit this file with real values
# - Use a secrets manager in production (Vault, AWS Secrets Manager, etc.)
# - Generate secure API keys with: openssl rand -hex 32

# =============================================================================
# Server Configuration
# =============================================================================
PORT=3001
NODE_ENV=production

# =============================================================================
# Security & Authentication
# =============================================================================

# Admin API Key (REQUIRED in production)
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=

# =============================================================================
# RPC Configuration
# =============================================================================

# Primary RPC (Helius recommended for production - better rate limits)
CRANK_RPC_PRIMARY=https://devnet.helius-rpc.com/?api-key=YOUR_HELIUS_KEY

# Secondary/Tertiary RPC endpoints (for failover)
CRANK_RPC_SECONDARY=https://api.devnet.solana.com
CRANK_RPC_TERTIARY=

# Legacy fallback
RPC_URL=https://api.devnet.solana.com

# =============================================================================
# Crank Service Configuration
# =============================================================================
CRANK_ENABLED=true
CRANK_POLLING_INTERVAL_MS=5000
CRANK_USE_ASYNC_MPC=true
CRANK_MAX_CONCURRENT_MATCHES=5
CRANK_MIN_SOL_BALANCE=0.1

# Crank wallet - use ONE of the following:
# Option 1: File path (for local development)
CRANK_WALLET_PATH=./keys/crank-wallet.json

# Option 2: Secret key directly (RECOMMENDED for production/Docker)
# Accepts JSON array format [1,2,3,...] or base58 string
# Generate with: solana-keygen new -o wallet.json
# Then copy contents of wallet.json here
# CRANK_WALLET_SECRET_KEY=[your,secret,key,bytes,here]

# Database persistence
CRANK_DB_PATH=./data/crank.db

# Graceful shutdown timeout
CRANK_SHUTDOWN_TIMEOUT_MS=30000

# =============================================================================
# Circuit Breaker
# =============================================================================
CRANK_ERROR_THRESHOLD=10
CRANK_PAUSE_DURATION_MS=60000

# =============================================================================
# Alerting (Optional)
# =============================================================================
SLACK_WEBHOOK_URL=
ALERT_WEBHOOK_URL=

# =============================================================================
# MPC Settings (Arcium v0.6.3)
# =============================================================================
# NOTE: useRealMpc now defaults to TRUE. Set to 'false' only for testing.
CRANK_USE_REAL_MPC=true
FULL_MXE_PROGRAM_ID=4pdgnqNQLxocJNo6MrSHKqieUpQ8zx3sxbsTANJFtSNi
ARCIUM_CLUSTER_OFFSET=456
MPC_TIMEOUT_MS=120000

# =============================================================================
# ZK Prover Configuration
# =============================================================================
# Path to sunspot binary (default: ~/sunspot/go/sunspot)
SUNSPOT_BINARY_PATH=/Users/YOUR_USER/sunspot/go/sunspot

# Path to eligibility circuit directory (default: PROJECT_ROOT/circuits/eligibility)
# CIRCUIT_DIR=/path/to/circuits/eligibility

# Enable strict mode - rejects simulated proofs, requires real ZK infrastructure
# Set to 'true' in production
STRICT_PROOFS=true

# Proof cache settings
PROOF_CACHE_MAX_SIZE=100
PROOF_CACHE_TTL_MS=1800000

# =============================================================================
# Program IDs (Devnet)
# =============================================================================
CONFIDEX_PROGRAM_ID=63bxUBrBd1W5drU5UMYWwAfkMX7Qr17AZiTrm3aqfArB
MXE_PROGRAM_ID=4pdgnqNQLxocJNo6MrSHKqieUpQ8zx3sxbsTANJFtSNi

# =============================================================================
# Token Mints (Devnet)
# =============================================================================
WSOL_MINT=So11111111111111111111111111111111111111112
USDC_MINT=Gh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuSzaG9Vp2KGtKJr

# =============================================================================
# CORS Configuration
# =============================================================================
# Frontend URL (for CORS whitelist in production)
FRONTEND_URL=https://app.confidex.exchange

# =============================================================================
# Streaming Infrastructure
# =============================================================================
STREAMING_ENABLED=true
WS_PATH=/ws

# Redis (REQUIRED for production - WebSocket scaling + Job Queues)
REDIS_ENABLED=true
REDIS_URL=redis://your-redis-host:6379
# Optional Redis auth
# REDIS_PASSWORD=

# =============================================================================
# Pyth Oracle (Price Streaming)
# =============================================================================
PYTH_HERMES_URL=https://hermes.pyth.network
PYTH_STALENESS_THRESHOLD_MS=30000
# Default price feeds (mainnet feed IDs)
SOL_USD_FEED_ID=ef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d
BTC_USD_FEED_ID=e62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43
ETH_USD_FEED_ID=ff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace

# =============================================================================
# Jito MEV Protection (Mainnet Only)
# =============================================================================
JITO_ENABLED=true
JITO_BLOCK_ENGINE_URL=https://mainnet.block-engine.jito.wtf
JITO_TIP_LAMPORTS=10000
JITO_SUBMISSION_TIMEOUT_MS=30000
JITO_POLL_TIMEOUT_MS=60000
# Optional: Jito auth token for private endpoints
# JITO_AUTH_TOKEN=

# =============================================================================
# TimescaleDB Analytics
# =============================================================================
# Required for analytics dashboard
TIMESCALE_URL=postgres://confidex:YOUR_PASSWORD@your-timescale-host:5432/confidex_analytics
ANALYTICS_POOL_SIZE=10
ANALYTICS_LOG_QUERIES=false
ANALYTICS_SNAPSHOT_INTERVAL_MS=60000
